// å¼€å§‹æ—¶é—´ï¼š2025-08-21 18:23:21
// é¢˜ç›®æ ‡é¢˜ï¼šç»Ÿè®¡å…¨ 1 å­çŸ©å½¢
// é¢˜ç›®æ ‡è®°ï¼šcount-submatrices-with-all-ones
// é¢˜ç›®ç¼–å·ï¼š1504
// é¢˜ç›®æè¿°ï¼š

/**
 * ç»™ä½ ä¸€ä¸ª m x n çš„äºŒè¿›åˆ¶çŸ©é˜µ mat ï¼Œè¯·ä½ è¿”å›æœ‰å¤šå°‘ä¸ª å­çŸ©å½¢ çš„å…ƒç´ å…¨éƒ¨éƒ½æ˜¯ 1 ã€‚
 * <p>
 * <p>
 * <p>
 * ç¤ºä¾‹ 1ï¼š
 * <p>
 * <p>
 * <p>
 * <p>
 * è¾“å…¥ï¼šmat = [[1,0,1],[1,1,0],[1,1,0]]
 * è¾“å‡ºï¼š13
 * è§£é‡Šï¼š
 * æœ‰ 6Â ä¸ª 1x1 çš„çŸ©å½¢ã€‚
 * æœ‰ 2 ä¸ª 1x2 çš„çŸ©å½¢ã€‚
 * æœ‰ 3 ä¸ª 2x1 çš„çŸ©å½¢ã€‚
 * æœ‰ 1 ä¸ª 2x2 çš„çŸ©å½¢ã€‚
 * æœ‰ 1 ä¸ª 3x1 çš„çŸ©å½¢ã€‚
 * çŸ©å½¢æ•°ç›®æ€»å…± = 6 + 2 + 3 + 1 + 1 = 13Â ã€‚
 * <p>
 * <p>
 * ç¤ºä¾‹ 2ï¼š
 * <p>
 * <p>
 * <p>
 * <p>
 * è¾“å…¥ï¼šmat = [[0,1,1,0],[0,1,1,1],[1,1,1,0]]
 * è¾“å‡ºï¼š24
 * è§£é‡Šï¼š
 * æœ‰ 8 ä¸ª 1x1 çš„å­çŸ©å½¢ã€‚
 * æœ‰ 5 ä¸ª 1x2 çš„å­çŸ©å½¢ã€‚
 * æœ‰ 2 ä¸ª 1x3 çš„å­çŸ©å½¢ã€‚
 * æœ‰ 4 ä¸ª 2x1 çš„å­çŸ©å½¢ã€‚
 * æœ‰ 2 ä¸ª 2x2 çš„å­çŸ©å½¢ã€‚
 * æœ‰ 2 ä¸ª 3x1 çš„å­çŸ©å½¢ã€‚
 * æœ‰ 1 ä¸ª 3x2 çš„å­çŸ©å½¢ã€‚
 * çŸ©å½¢æ•°ç›®æ€»å…± = 8 + 5 + 2 + 4 + 2 + 2 + 1 = 24 ã€‚
 * <p>
 * <p>
 * <p>
 * <p>
 * <p>
 * æç¤ºï¼š
 * <p>
 * <p>
 * 1 <= m, n <= 150
 * mat[i][j] ä»…åŒ…å« 0 æˆ– 1
 * <p>
 * <p>
 * Related Topics æ ˆ æ•°ç»„ åŠ¨æ€è§„åˆ’ çŸ©é˜µ å•è°ƒæ ˆ ğŸ‘ 252 ğŸ‘ 0
 */
//leetcode submit region begin(Prohibit modification and deletion)
class Solution {
    public int numSubmat(int[][] mat) {
        int m = mat.length, n = mat[0].length;
        int res = 0;
        int[][] row = new int[m][n];

        for (int i = 0; i < m; i++) {
            for (int j = 0; j < n; j++) {
                if (j == 0) {
                    row[i][j] = mat[i][j];
                } else {
                    row[i][j] = mat[i][j] == 0 ? 0 : row[i][j - 1] + 1;
                }
                int cur = row[i][j];
                for (int k = i; k >= 0; k--) {
                    cur = Math.min(cur, row[k][j]);
                    if (cur == 0) {
                        break;
                    }
                    res += cur;
                }
            }
        }
        return res;
    }
}

//leetcode submit region end(Prohibit modification and deletion)

