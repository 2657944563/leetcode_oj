// å¼€å§‹æ—¶é—´ï¼š2023-12-08 19:08:11
// é¢˜ç›®æ ‡é¢˜ï¼šå‡ºç§Ÿè½¦çš„æœ€å¤§ç›ˆåˆ©
// é¢˜ç›®æ ‡è®°ï¼šmaximum-earnings-from-taxi
// é¢˜ç›®ç¼–å·ï¼š2008
// é¢˜ç›®æè¿°ï¼š

/**
 * ä½ é©¾é©¶å‡ºç§Ÿè½¦è¡Œé©¶åœ¨ä¸€æ¡æœ‰ n ä¸ªåœ°ç‚¹çš„è·¯ä¸Šã€‚è¿™ n ä¸ªåœ°ç‚¹ä»è¿‘åˆ°è¿œç¼–å·ä¸º 1 åˆ° n ï¼Œä½ æƒ³è¦ä» 1 å¼€åˆ° n ï¼Œé€šè¿‡æ¥ä¹˜å®¢è®¢å•ç›ˆåˆ©ã€‚ä½ åªèƒ½æ²¿ç€ç¼–å·é€’å¢çš„æ–¹å‘å‰
 * è¿›ï¼Œä¸èƒ½æ”¹å˜æ–¹å‘ã€‚
 * <p>
 * ä¹˜å®¢ä¿¡æ¯ç”¨ä¸€ä¸ªä¸‹æ ‡ä» 0 å¼€å§‹çš„äºŒç»´æ•°ç»„ rides è¡¨ç¤ºï¼Œå…¶ä¸­ rides[i] = [starti, endi, tipi] è¡¨ç¤ºç¬¬ i ä½ä¹˜å®¢éœ€è¦ä»åœ°ç‚¹
 * starti å‰å¾€ endi ï¼Œæ„¿æ„æ”¯ä»˜ tipi å…ƒçš„å°è´¹ã€‚
 * <p>
 * æ¯ä¸€ä½ ä½ é€‰æ‹©æ¥å•çš„ä¹˜å®¢ i ï¼Œä½ å¯ä»¥ ç›ˆåˆ© endi - starti + tipi å…ƒã€‚ä½ åŒæ—¶ æœ€å¤š åªèƒ½æ¥ä¸€ä¸ªè®¢å•ã€‚
 * <p>
 * ç»™ä½  n å’Œ rides ï¼Œè¯·ä½ è¿”å›åœ¨æœ€ä¼˜æ¥å•æ–¹æ¡ˆä¸‹ï¼Œä½ èƒ½ç›ˆåˆ© æœ€å¤š å¤šå°‘å…ƒã€‚
 * <p>
 * æ³¨æ„ï¼šä½ å¯ä»¥åœ¨ä¸€ä¸ªåœ°ç‚¹æ”¾ä¸‹ä¸€ä½ä¹˜å®¢ï¼Œå¹¶åœ¨åŒä¸€ä¸ªåœ°ç‚¹æ¥ä¸Šå¦ä¸€ä½ä¹˜å®¢ã€‚
 * <p>
 * <p>
 * <p>
 * ç¤ºä¾‹ 1ï¼š
 * <p>
 * è¾“å…¥ï¼šn = 5, rides = [[2,5,4],[1,5,1]]
 * è¾“å‡ºï¼š7
 * è§£é‡Šï¼šæˆ‘ä»¬å¯ä»¥æ¥ä¹˜å®¢ 0 çš„è®¢å•ï¼Œè·å¾— 5 - 2 + 4 = 7 å…ƒã€‚
 * <p>
 * <p>
 * ç¤ºä¾‹ 2ï¼š
 * <p>
 * è¾“å…¥ï¼šn = 20, rides = [[1,6,1],[3,10,2],[10,12,3],[11,12,2],[12,15,2],[13,18,1]]
 * è¾“å‡ºï¼š20
 * è§£é‡Šï¼šæˆ‘ä»¬å¯ä»¥æ¥ä»¥ä¸‹ä¹˜å®¢çš„è®¢å•ï¼š
 * - å°†ä¹˜å®¢ 1 ä»åœ°ç‚¹ 3 é€å¾€åœ°ç‚¹ 10 ï¼Œè·å¾— 10 - 3 + 2 = 9 å…ƒã€‚
 * - å°†ä¹˜å®¢ 2 ä»åœ°ç‚¹ 10 é€å¾€åœ°ç‚¹ 12 ï¼Œè·å¾— 12 - 10 + 3 = 5 å…ƒã€‚
 * - å°†ä¹˜å®¢ 5 ä»åœ°ç‚¹ 13 é€å¾€åœ°ç‚¹ 18 ï¼Œè·å¾— 18 - 13 + 1 = 6 å…ƒã€‚
 * æˆ‘ä»¬æ€»å…±è·å¾— 9 + 5 + 6 = 20 å…ƒã€‚
 * <p>
 * <p>
 * <p>
 * æç¤ºï¼š
 * <p>
 * <p>
 * 1 <= n <= 10âµ
 * 1 <= rides.length <= 3 * 10â´
 * rides[i].length == 3
 * 1 <= starti < endi <= n
 * 1 <= tipi <= 10âµ
 * <p>
 * <p>
 * Related Topics æ•°ç»„ äºŒåˆ†æŸ¥æ‰¾ åŠ¨æ€è§„åˆ’ æ’åº ğŸ‘ 149 ğŸ‘ 0
 */
//leetcode submit region begin(Prohibit modification and deletion)
// ä¼šè¶…æ—¶çš„é€’å½’ä»£ç 
class Solution {
    public long maxTaxiEarnings(int n, int[][] rides) {
        List<int[]>[] groups = new ArrayList[n + 1];
        for (int[] r : rides) {
            int start = r[0], end = r[1], tip = r[2];
            if (groups[end] == null) {
                groups[end] = new ArrayList<>();
            }
            groups[end].add(new int[]{start, end - start + tip});
        }

        long[] memo = new long[n + 1];
        Arrays.fill(memo, -1); // -1 è¡¨ç¤ºæ²¡æœ‰è®¡ç®—è¿‡
        return dfs(n, memo, groups);
    }

    private long dfs(int i, long[] memo, List<int[]>[] groups) {
        if (i == 1) {
            return 0;
        }
        if (memo[i] != -1) { // ä¹‹å‰è®¡ç®—è¿‡
            return memo[i];
        }
        long res = dfs(i - 1, memo, groups);
        if (groups[i] != null) {
            for (int[] p : groups[i]) {
                res = Math.max(res, dfs(p[0], memo, groups) + p[1]);
            }
        }
        return memo[i] = res; // è®°å¿†åŒ–
    }
}


//leetcode submit region end(Prohibit modification and deletion)

